"0",""
"0","  lamd <- lambdas[which.min(rmses)]"
"0","  movie_bias <- edx %>% "
"0","    group_by(movieId) %>%"
"0","    summarize(movie_bias = sum(rating - mean_movie_rating)/(n()+lamd))"
"2","`summarise()` ungrouping output (override with `.groups` argument)
"
"0","  #regularize user bias"
"0","  user_bias <- edx %>% "
"0","    left_join(movie_bias, by=""movieId"") %>%"
"0","    group_by(userId) %>%"
"0","    summarize(user_bias = sum(rating - movie_bias - mean_movie_rating)/(n()+lamd))"
"2","`summarise()` ungrouping output (override with `.groups` argument)
"
"0","  "
"0","  predictions <- test_dataset %>% "
"0","    left_join(movie_bias, by = ""movieId"") %>%"
"0","    left_join(user_bias, by = ""userId"") %>%"
"0","    mutate(new_pred = mean_movie_rating + movie_bias + user_bias) %>%"
"0","    pull(new_pred)"
"0","  fourth_rmse <- rmse(predictions, test_dataset$rating)"
"0","  results <- bind_rows(results,"
"0","                       data_frame(method=""Model 4: Mean + movie + user bias + Regularisation"","
"0","                                  RMSE = fourth_rmse))"
"0","  results %>% knitr::kable()"
